<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RemoJobs.co</title>
    <!-- Include Firebase and Auth Scripts -->
  <script  src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script  src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <script  src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script  src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>

<!-- Include DOMPurify from a CDN -->
<script src="https://cdn.jsdelivr.net/npm/dompurify@2"></script>
    <script defer src="firebase.js"></script>
    <script defer src="auth.js"></script>
    <style>
        /* Add your styles here */

        /* Reset some default styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: #f7f7f7;
            line-height: 1.6;
        }

header {
    background-color: #333;
    color: #fff;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 2rem;
}

.logo {
    list-style: none;
}

.logo a {
    text-decoration: none;
    color: white;
}

.logo h1 {
    font-size: 2rem;
}

nav ul {
    list-style: none;
    text-align: center;
    display: flex; /* Add this line to make the list items flex items */
            cursor: pointer;

}

nav ul li {
    margin: 0 1rem;
}

nav ul li a {
    text-decoration: none;
    color: #fff;
    font-weight: bold;
    transition: color 0.3s ease;
}

nav ul li a:hover {
    color: #ddd;
}

#quickAddBTN {
    margin: 2% auto;
    display: block;
}
        /* Add your additional styles here */

        /* ... */

        /* Footer styles */
        footer {
            background-color: #333;
            color: #fff;
            text-align: center;
            padding: 1rem 0;
        }

        /* Login/Register Form styles */
        #mainContainer {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin: 5em auto;
            width: 90%;
        }

/* Add this CSS styling for the pop-ups */

.popup {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  padding: 20px;
background-color: #00000078;
  background-color: #fff;
  border: 1px solid #ccc;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  z-index: 1000;
}

.popup-content {
  text-align: center;
}

.close {
  position: absolute;
  top: 10px;
  right: 10px;
  font-size: 20px;
  cursor: pointer;
  color: #333;
}

h3 {
  margin-bottom: 20px;
  color: #333;
}

input, select{
    font-size: 2em;
    width: inherit;
	padding: 10px;
  margin: 10px 0;
  box-sizing: border-box;
}

	    
#groupDiv {
  display: flex;
  justify-content: space-between;
  margin: 20px 0;
}

button {
  background-color: #4CAF50;
  color: #fff;
  padding: 10px 20px;
  border: none;
  cursor: pointer;
  border-radius: 5px;
  font-size: 16px;
}

hr {
  margin: 20px 0;
  border: 1px solid #ccc;
}
.left{
    text-align: left;
}
	    #description{
width: 100%;
    min-height: 250px;
    padding: 2%;
}

    .form-group{
    width: 100%;
	    }
.form-group label{
    margin: 2% auto auto;
    display: block;
}

	    
    .form-group-inside{
     display: flex;
	    justify-content: center;
}

.form-group-inside-wrap{
    margin:  auto 2%;

}


	    
.button-group{
     display: flex;
       justify-content: center;
    margin: 2%;
}
.button-group button{
         margin: auto 1%;

}    
#welcome-area{
    display: block;
    margin: 2%;
    text-align: center;
}

#stateArea, #cityArea{
     display: none;

}

#addJobPopup{
    width: 70%;
    overflow-y: auto;
    height: 95%;
    overflow-x: hidden;
}

#jobPostsContainer {
  display: flex;
  flex-direction: column;
}

.jobPost {
  border: 1px solid #ddd;
  margin-bottom: 16px;
  padding: 16px;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

.jobPost:hover {
  background-color: #f9f9f9;
}

.postInfo {
  font-size: 16px;
}

.companyName {
  font-weight: bold;
  color: #007bff; /* Blue color for company name */
}

.jobPosition {
  margin-top: 8px;
}

.dateTime,
.jobType {
  margin-top: 4px;
  color: #777; /* Gray color for date and job type */
}

.noResults {
  text-align: center;
  font-size: 18px;
  color: #777;
  margin: 16px;
}

	    
        /* Add your additional form styles here */

        /* ... */

        /* Message Box styles */
        .mainMessage-box {
            position: fixed;
            top: -100px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #333;
            color: #fff;
            font-weight: 800;
            width: 300px;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            transition: top 0.5s ease-in-out;
            z-index: 1000;
            text-align: center;
        }

        .mainMessage-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
.welcome-area{
            margin: 10px 0;
            text-align: center;

}
        #mainMessageText {
            margin: 10px 0;
        }

        #mainCloseButton {
            background-color: #7b7978;
            color: #fff;
            border: none;
            border-radius: 3px;
            padding: 5px 10px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s ease;
        }

        #mainCloseButton:hover {
            background-color: #575453;
        }
    </style>
</head>
<body>
    <!-- Your HTML content goes here -->

<header>
    <div class="logo">
        <a href="/RemoteJobs/"><h1>Remote Jobs</h1></a>
    </div>
    <nav>
        <ul>
            <li id="registerBTN" onclick="openPopup('registerPopup')">Register</li>
            <li id="loginBTN" onclick="openPopup('loginPopup')">Login</li>
            <li><a href="/RemoteJobs/dashboard">Dashboard</a></li>
            <li><a href="/RemoteJobs/about">About</a></li>
            <li><a href="/RemoteJobs/contact">Contact</a></li>
            <li id="logoutBTN" onclick="logoutUser()">Logout</li>
        </ul>
    </nav>
</header>



	
	
<!-- Add Job button -->
<button id="quickAddBTN" onclick="openPopup('addJobPopup')">Add Job</button>
    <div id="welcome-area"></div>

<!-- HTML for buttons -->
<div class="button-group">
<button onclick="sortByDate()">Sort by Date</button>
<button onclick="filterByJobType('Remote')">Filter by Remote Jobs</button>
<button onclick="filterByJobType('Hybrid')">Filter by Hybrid Jobs</button>
</div>
    <div class="form-group">

<!-- Job Types Buttons -->
<div class="button-group">
  <button onclick="toggleJobType('fullTime')">Full Time</button>
  <button onclick="toggleJobType('partTime')">Part Time</button>
</div>

<!-- Job Categories Buttons -->
<div class="button-group">
  <button onclick="toggleJobCategory('contract')">Contract</button>
  <button onclick="toggleJobCategory('freelance')">Freelance</button>
  <button onclick="toggleJobCategory('temporary')">Temporary</button>
  <button onclick="toggleJobCategory('internship')">Internship</button>
</div>

<!-- Experience Levels Buttons -->
<div class="button-group">
  <button onclick="toggleExperienceLevel('entryLevel')">Entry Level</button>
  <button onclick="toggleExperienceLevel('midLevel')">Mid Level</button>
  <button onclick="toggleExperienceLevel('seniorLevel')">Senior Level</button>
</div>
    </div>
	
<!-- Display area for job posts -->
<div id="jobPostsContainer"></div>



	
	
    <div id="views">
        <div id="mainContainer">
            <!-- ... Your existing HTML content ... -->





		
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="">
            <p>&copy; 2024 Job Board All rights reserved. <a id="LRP" href='https://rw-501.github.io/Portfolio/'>Dev Portfolio</a></p>
        </div>
    </footer>





<!-- Add Job Popup -->
<div class="popup" id="addJobPopup">
  <div class="popup-content">
    <span class="close" onclick="closePopup('addJobPopup')">&times;</span>
    <h3>Add Job</h3>
	
    <div class="form-group">
    <label for="companyName">Company Name:</label>
    <input type="text" id="companyName" placeholder="Enter company name" required>
  </div>
	
    <div class="form-group">
    <label for="jobPosition">Job Position:</label>
    <input type="text" id="jobPosition" placeholder="Enter job position" required>
  </div>

    <label for="jobCategory">Job Category:</label>
    <select id="jobCategory">
      <!-- Add your job category options here -->
<option value="Software Development">Software Development</option>
<option value="Graphic Design">Graphic Design</option>
<option value="Customer Support">Customer Support</option>
<option value="Marketing">Marketing</option>
<option value="Data Entry">Data Entry</option>
<option value="Sales">Sales</option>
<option value="Writing">Writing</option>
<option value="Human Resources">Human Resources</option>
<option value="Finance">Finance</option>
<option value="Project Management">Project Management</option>
<option value="Legal">Legal</option>
<option value="Education">Education</option>
<option value="Healthcare">Healthcare</option>
<option value="Engineering">Engineering</option>
<option value="Other">Other</option>
    </select>

	  
<div class="form-group">
  <label for="jobType">Job Type:</label>
  <select id="jobType" name="jobType">
    <option value="Remote">Remote</option>
    <option value="Hybrid">Hybrid</option>
    <!-- Add other default job types as needed -->
  </select>
</div>

<div class="form-group">
  <label>Additional Job Types:</label>
<div class="form-group-inside">  
	<div class="form-group-inside-wrap">  
<input type="checkbox" id="contract" name="contract" value="contract">
    <label for="contract">Contract</label>
	</div>
	
<div class="form-group-inside-wrap">  
    <input type="checkbox" id="fullTime" name="fullTime" value="fullTime">
    <label for="fullTime">Full Time</label>
	</div>
	
<div class="form-group-inside-wrap">  
    <input type="checkbox" id="partTime" name="partTime" value="partTime">
    <label for="partTime">Part Time</label>
  </div>
</div>
	
<div class="form-group-inside">  
	
<div class="form-group-inside-wrap">  
    <input type="checkbox" id="freelance" name="freelance" value="freelance">
    <label for="freelance">Freelance</label>
	</div>
	
<div class="form-group-inside-wrap">  
    <input type="checkbox" id="temporary" name="temporary" value="temporary">
    <label for="temporary">Temporary</label>
	</div>
	
<div class="form-group-inside-wrap">  
    <input type="checkbox" id="internship" name="internship" value="internship">
    <label for="internship">Internship</label>
</div>
  </div>
</div>

<div class="form-group">
  <label>Experience Level:</label>
<div class="form-group-inside"> 
	
<div class="form-group-inside-wrap">  
	<input type="checkbox" id="entryLevel" name="entryLevel" value="entryLevel">
    <label for="entryLevel">Entry Level</label>
	</div>
	
<div class="form-group-inside-wrap">  
    <input type="checkbox" id="midLevel" name="midLevel" value="midLevel">
    <label for="midLevel">Mid Level</label>
	</div>
	
<div class="form-group-inside-wrap">  
    <input type="checkbox" id="seniorLevel" name="seniorLevel" value="seniorLevel">
    <label for="seniorLevel">Senior Level</label>
  </div>
</div>
</div>

	  
    <div class="left">

    <div id="stateArea" class="form-group">
 <label for="stateDropdown">Select State:</label>
  <select id="stateDropdown" onchange="populateCities()">
      <!-- Add your state options here -->
<option value="Alabama">Alabama</option>
<option value="Alaska">Alaska</option>
<option value="Arizona">Arizona</option>
<option value="Arkansas">Arkansas</option>
<option value="California">California</option>
<option value="Colorado">Colorado</option>
<option value="Connecticut">Connecticut</option>
<option value="Delaware">Delaware</option>
<option value="Florida">Florida</option>
<option value="Georgia">Georgia</option>
<option value="Hawaii">Hawaii</option>
<option value="Idaho">Idaho</option>
<option value="Illinois">Illinois</option>
<option value="Indiana">Indiana</option>
<option value="Iowa">Iowa</option>
<option value="Kansas">Kansas</option>
<option value="Kentucky">Kentucky</option>
<option value="Louisiana">Louisiana</option>
<option value="Maine">Maine</option>
<option value="Maryland">Maryland</option>
<option value="Massachusetts">Massachusetts</option>
<option value="Michigan">Michigan</option>
<option value="Minnesota">Minnesota</option>
<option value="Mississippi">Mississippi</option>
<option value="Missouri">Missouri</option>
<option value="Montana">Montana</option>
<option value="Nebraska">Nebraska</option>
<option value="Nevada">Nevada</option>
<option value="New Hampshire">New Hampshire</option>
<option value="New Jersey">New Jersey</option>
<option value="New Mexico">New Mexico</option>
<option value="New York">New York</option>
<option value="North Carolina">North Carolina</option>
<option value="North Dakota">North Dakota</option>
<option value="Ohio">Ohio</option>
<option value="Oklahoma">Oklahoma</option>
<option value="Oregon">Oregon</option>
<option value="Pennsylvania">Pennsylvania</option>
<option value="Rhode Island">Rhode Island</option>
<option value="South Carolina">South Carolina</option>
<option value="South Dakota">South Dakota</option>
<option value="Tennessee">Tennessee</option>
<option value="Texas">Texas</option>
<option value="Utah">Utah</option>
<option value="Vermont">Vermont</option>
<option value="Virginia">Virginia</option>
<option value="Washington">Washington</option>
<option value="West Virginia">West Virginia</option>
<option value="Wisconsin">Wisconsin</option>
<option value="Wyoming">Wyoming</option>
    </select>
  </div>
	
    <div id="cityArea" class="form-group">
  <label for="cityDropdown">City:</label>
  <select id="cityDropdown">
    <!-- City options will be populated dynamically -->
  </select>

  <div id="zipCodeDisplay" class="form-group"></div>


  </div>
	    
	    <label for="description">Description:</label>
    <div class="form-group">
    <textarea id="description" placeholder="Enter job description" required></textarea>
  </div>
	    
  </div>
	  <div class="form-group">
    <label for="applicationLink">Application Link:</label>
    <input type="url" id="applicationLink" placeholder="Enter application link" required>
	  </div>
	  
    <button onclick="submitJob()">Submit Job</button>
  </div>
</div>




	

<div class="popup" id="registerPopup">
  <div class="popup-content">
    <span class="close" onclick="closePopup('registerPopup')">&times;</span>
    <h3>Register</h3>
    <input type="email" id="register-email" placeholder="Email" required>
    <input type="password" id="register-password" placeholder="Password" required>
    <div id="groupDiv">
      <button onclick="registerWithEmailPassword()">Register with Email</button>
      <button onclick="registerWithGoogle()">Register with Google</button>
      <button onclick="registerAnonymously()">Register Anonymously</button>
    </div>
    <hr>
    <button onclick="openPopup('loginPopup')">Login</button>
  </div>
</div>

<div class="popup" id="loginPopup">
  <div class="popup-content">
    <span class="close" onclick="closePopup('loginPopup')">&times;</span>
    <h3>Login</h3>
    <input type="email" id="login-email" placeholder="Email" required>
    <input type="password" id="login-password" placeholder="Password" required>
    <div id="groupDiv">
      <button onclick="loginWithEmailPassword()">Login with Email</button>
      <button onclick="loginWithGoogle()">Login with Google</button>
      <button onclick="loginAnonymously()">Login Anonymously</button>
    </div>
    <hr>
    <button onclick="openPopup('registerPopup')">Register</button>
  </div>
</div>





	
    <!-- Your scripts go here -->
    <script>

// Function to get job posts from Firestore
async function getJobPosts() {
  try {
	//  const firestore = firebase.firestore();

    const jobPostsRef = firestore.collection('Job_Posts');
    const snapshot = await jobPostsRef.get();
    
    const jobPosts = [];
    snapshot.forEach(doc => {
      const data = doc.data();
      jobPosts.push({ id: doc.id, ...data });
    });

    return jobPosts;
  } catch (error) {
    console.error('Error getting job posts:', error);
    return [];
  }
}



// Function to render job posts
function renderJobPosts(jobPosts) {
  const jobPostsContainer = document.getElementById('jobPostsContainer');
  jobPostsContainer.innerHTML = ''; // Clear previous content

  // Check if there are no results
  if (jobPosts.length === 0) {
    const noResultsElement = document.createElement('div');
    noResultsElement.classList.add('noResults');
    noResultsElement.textContent = 'No Results';
    jobPostsContainer.appendChild(noResultsElement);
    return;
  }

  // Loop through job posts and create styled HTML elements
  jobPosts.forEach(post => {
    const postElement = document.createElement('div');
    postElement.classList.add('jobPost');

    const postInfoElement = document.createElement('div');
    postInfoElement.classList.add('postInfo');

    // Create individual elements for better styling
    const companyElement = document.createElement('div');
    companyElement.classList.add('companyName');
    companyElement.textContent = `Company: ${post.companyName}`;

    const positionElement = document.createElement('div');
    positionElement.classList.add('jobPosition');
    positionElement.textContent = `Position: ${post.jobPosition}`;

    const dateElement = document.createElement('div');
    dateElement.classList.add('dateTime');
let postedTime = formatElapsedTime(post.dateTime);
    dateElement.textContent = `Posted: ${postedTime}`;

    const jobTypeElement = document.createElement('div');
    jobTypeElement.classList.add('jobType');
    jobTypeElement.textContent = `Job Type: ${post.jobType}`;
if (!companyName || companyName == "" || companyName == undefined || companyName == null){
}else{
    // Append individual elements to postInfoElement
    postInfoElement.appendChild(companyElement);
    postInfoElement.appendChild(positionElement);
    postInfoElement.appendChild(dateElement);
    postInfoElement.appendChild(jobTypeElement);
}
    // Add click event listener to handle clicks
    postInfoElement.addEventListener('click', () => {
      // Handle click event, e.g., navigate to job details page
      console.log('Job clicked:', post.id);
    });

    postElement.appendChild(postInfoElement);
    jobPostsContainer.appendChild(postElement);
  });
}


// Function to sort job posts by date (descending)
function sortByDate() {
  const sortedByDate = jobPosts.slice().sort((a, b) => b.dateTime.localeCompare(a.dateTime));
  renderJobPosts(sortedByDate);
}

// Function to filter job posts by job type
function filterByJobType(jobType) {
  const filteredByJobType = jobPosts.filter(post => post.jobType === jobType);
  renderJobPosts(filteredByJobType);
}






// Function to toggle job type
function toggleJobType(jobType) {
  jobPostData[jobType] = !jobPostData[jobType];
  console.log(`${jobType} toggled: ${jobPostData[jobType]}`);
}

// Function to toggle job category
function toggleJobCategory(jobCategory) {
  jobPostData[jobCategory] = !jobPostData[jobCategory];
  console.log(`${jobCategory} toggled: ${jobPostData[jobCategory]}`);
}

// Function to toggle experience level
function toggleExperienceLevel(experienceLevel) {
  jobPostData[experienceLevel] = !jobPostData[experienceLevel];
  console.log(`${experienceLevel} toggled: ${jobPostData[experienceLevel]}`);
}




	    

    // Function to populate city dropdown based on the selected state
// Declare data variable in a higher scope
let data;

function populateCities() {
  const stateDropdown = document.getElementById('stateDropdown');
  const selectedState = stateDropdown.value;
  const cityDropdown = document.getElementById('cityDropdown');
  const zipCodeDisplay = document.getElementById('zipCodeDisplay');

  // Fetch data from the JSON file only if it's not already fetched
  if (!data) {
    fetch('locations.json')
      .then(response => response.json())
      .then(jsonData => {
        data = jsonData;

        // Populate state options
        data.states.forEach(state => {
          const stateOption = document.createElement('option');
          stateOption.value = state.name;
          stateOption.text = state.name;
          stateDropdown.appendChild(stateOption);
        });

        // Call populateCities again after fetching data
        populateCities();
      })
      .catch(error => console.error('Error fetching data:', error));
  } else {
    // Find the selected state in the JSON data
    const selectedStateData = data.states.find(state => state.name === selectedState);

    // Clear existing options
    cityDropdown.innerHTML = '';
    zipCodeDisplay.innerHTML = '';

    // Populate city options
    selectedStateData.cities.forEach(city => {
      const cityOption = document.createElement('option');
      cityOption.value = city.name;
      cityOption.text = city.name;
      cityDropdown.appendChild(cityOption);
    });

    // Display zip codes for the first city (optional)
  //  displayZipCodes(selectedStateData.cities[0]);
  }
}



    // Function to display zip codes for the selected city
    function displayZipCodes(selectedCity) {
      const zipCodeDisplay = document.getElementById('zipCodeDisplay');
      zipCodeDisplay.innerHTML = `Zip Codes: ${selectedCity.zipCodes.join(', ')}`;
    }

let jobPostData = "";

  function submitJob() {

	  const user = firebase.auth().currentUser;

if (user) {
  // Access the user's information
  const userId = user.uid;

    // Add your logic to submit the job details
    // Retrieve values from input fields and perform the necessary actions
    // For example: 
    const companyName = document.getElementById('companyName').value;
    const jobPosition = document.getElementById('jobPosition').value;
    const state = document.getElementById('stateDropdown').value;
    const city = document.getElementById('cityDropdown').value;
    const jobCategory = document.getElementById('jobCategory').value;
    const description = document.getElementById('description').value;
    const applicationLink = document.getElementById('applicationLink').value;


 var jobType = document.getElementById('jobType').value;

  // Get the state of each checkbox for additional job types
  var contract = document.getElementById('contract').checked;
  var fullTime = document.getElementById('fullTime').checked;
  var partTime = document.getElementById('partTime').checked;
  var freelance = document.getElementById('freelance').checked;
  var temporary = document.getElementById('temporary').checked;
  var internship = document.getElementById('internship').checked;

  // Get the state of each checkbox for experience levels
  var entryLevel = document.getElementById('entryLevel').checked;
  var midLevel = document.getElementById('midLevel').checked;
  var seniorLevel = document.getElementById('seniorLevel').checked;

    // Get current date and time
    const currentDate = new Date();
    const formattedDate = currentDate.toISOString();


// Validate and filter each field
const validCompanyName = companyName.trim() !== '' ? filterContent(companyName) : null;
const validJobPosition = jobPosition.trim() !== '' ? filterContent(jobPosition) : null;
const validJobCategory = jobCategory.trim() !== '' ? filterContent(jobCategory) : null;
const validDescription = description.trim() !== '' ? filterContent(description) : null;
const validApplicationLink = applicationLink.trim() !== '' ? filterContent(applicationLink) : null;

// Check if all fields are valid
if (
  validCompanyName !== null &&
  validJobPosition !== null &&
  validJobCategory !== null &&
  validDescription !== null &&
  validApplicationLink !== null
) {
  // All fields are valid, proceed with submitting the job post
  const jobPostData = {
    companyName: validCompanyName,
    jobPosition: validJobPosition,
    jobCategory: validJobCategory,
    description: validDescription,
    applicationLink: validApplicationLink,
  state: state,
  city: city,
  jobType: jobType,
  contract: contract, // Add the contract field
  fullTime: fullTime, // Add the fullTime field
  partTime: partTime, // Add the partTime field
  freelance: freelance, // Add the freelance field
  temporary: temporary, // Add the temporary field
  internship: internship, // Add the internship field
  entryLevel: entryLevel, // Add the entryLevel field
  midLevel: midLevel, // Add the midLevel field
  seniorLevel: seniorLevel, // Add the seniorLevel field
  userId: userId,
  dateTime: formattedDate,
};


  
addJobPost(jobPostData);
	  
	  // Close the popup after submission
    closePopup('addJobPopup');

	  // Clear and reset the form
document.getElementById('companyName').value = '';
document.getElementById('jobPosition').value = '';
document.getElementById('stateDropdown').value = ''; // Reset the state dropdown
document.getElementById('cityDropdown').value = ''; // Reset the city dropdown
document.getElementById('jobCategory').value = '';
document.getElementById('description').value = '';
document.getElementById('applicationLink').value = '';
document.getElementById('jobType').value = 'Remote'; // Reset jobType to the default value

// Reset additional job types checkboxes
document.getElementById('contract').checked = false;
document.getElementById('fullTime').checked = false;
document.getElementById('partTime').checked = false;
document.getElementById('freelance').checked = false;
document.getElementById('temporary').checked = false;
document.getElementById('internship').checked = false;

// Reset experience level checkboxes
document.getElementById('entryLevel').checked = false;
document.getElementById('midLevel').checked = false;
document.getElementById('seniorLevel').checked = false;
} else {
  // Display an error message or handle invalid fields as needed
  console.error('Some fields are invalid.');
}

} else {
	  console.error('No user signed in.');
}
	
  }


async function addJobPost(jobPostData) {
  try {
    // Check if Firebase is initialized
    if (!firebase.apps.length) {
      console.log('Initializing Firebase...');
      // Initialize Firebase if not already initialized
      firebase.initializeApp(firebaseConfig);
    }

    // Check if the user is logged in
    const user = firebase.auth().currentUser;
    if (!user) {
      console.error('User not logged in');
      return;
    }

    // Get user ID from Firebase
    const userId = user.uid;
    console.log('User ID:', userId);

    // Check if Firestore is initialized
    if (!firebase.firestore) {
      console.error('Firestore is not available');
      return;
    }

    const firestore = firebase.firestore();

    // Add the job post document to Firestore
    console.log('Adding job post to Firestore...');
    const docRef = await firestore.collection('Job_Posts').add(jobPostData);

    // Get the newly generated document ID and update it as 'id'
    const docId = docRef.id;
    await docRef.update({ id: docId });
	  
    // Fetch job posts and initially render them
    const initialJobPosts = await getJobPosts();
    jobPosts = initialJobPosts; // Assuming jobPosts is a global variable
    renderJobPosts(jobPosts);
	  
    console.log('Job post added successfully with ID:', docId);
  } catch (error) {
    console.error('Error adding job post:', error.message);
  }
}




document.getElementById('jobType').onchange = function() {
  var selectedJobType = this.value;
  
  // Get the div elements
  var stateArea = document.getElementById('stateArea');
  var cityArea = document.getElementById('cityArea');
  
  // Check the selected job type
  if (selectedJobType === 'Hybrid') {
    // Show the divs
    stateArea.style.display = 'block';
    cityArea.style.display = 'block';
  } else {
    // Hide the divs
    stateArea.style.display = 'none';
    cityArea.style.display = 'none';
  }
};

    








	    
// Add these functions to your existing JavaScript
function openPopup(popupId) {
    const popup = document.getElementById(popupId);
    popup.style.display = 'block';
}

function closePopup(popupId) {
    const popup = document.getElementById(popupId);
    popup.style.display = 'none';
}



function setLoggedInFlag() {
    localStorage.setItem('userLoggedIn', 'true');
	
}

function removeLoggedInFlag() {
    localStorage.removeItem('userLoggedIn');
}

function registerAnonymously() {
    firebase.auth().signInAnonymously()
        .then((userCredential) => {
            // Handle successful anonymous registration
            console.log('Anonymous registration successful:', userCredential);
            setLoggedInFlag();
            closePopup('registerPopup');
        })
        .catch((error) => {
            // Handle errors
            console.error('Anonymous registration failed:', error.message);
        });
}

function registerWithEmailPassword() {
    const email = document.getElementById('register-email').value;
    const password = document.getElementById('register-password').value;

    firebase.auth().createUserWithEmailAndPassword(email, password)
        .then((userCredential) => {
            // Handle successful email/password registration
            console.log('Email/password registration successful:', userCredential);
            setLoggedInFlag();
            closePopup('registerPopup');
        })
        .catch((error) => {
            // Handle errors
            console.error('Email/password registration failed:', error.message);
        });
}

function registerWithGoogle() {
    const provider = new firebase.auth.GoogleAuthProvider();

    firebase.auth().signInWithPopup(provider)
        .then((userCredential) => {
            // Handle successful Google registration
            console.log('Google registration successful:', userCredential);
            setLoggedInFlag();
            closePopup('registerPopup');
        })
        .catch((error) => {
            // Handle errors
            console.error('Google registration failed:', error.message);
        });
}

function loginAnonymously() {
    firebase.auth().signInAnonymously()
        .then((userCredential) => {
            // Handle successful anonymous login
            console.log('Anonymous login successful:', userCredential);
            setLoggedInFlag();
            closePopup('loginPopup');
        })
        .catch((error) => {
            // Handle errors
            console.error('Anonymous login failed:', error.message);
        });
}

function loginWithEmailPassword() {
    const email = document.getElementById('login-email').value;
    const password = document.getElementById('login-password').value;

    firebase.auth().signInWithEmailAndPassword(email, password)
        .then((userCredential) => {
            // Handle successful email/password login
            console.log('Email/password login successful:', userCredential);
            setLoggedInFlag();
            closePopup('loginPopup');
        })
        .catch((error) => {
            // Handle errors
            console.error('Email/password login failed:', error.message);
        });
}

function loginWithGoogle() {
    const provider = new firebase.auth.GoogleAuthProvider();

    firebase.auth().signInWithPopup(provider)
        .then((userCredential) => {
            // Handle successful Google login
            console.log('Google login successful:', userCredential);
            setLoggedInFlag();
            closePopup('loginPopup');
        })
        .catch((error) => {
            // Handle errors
            console.error('Google login failed:', error.message);
        });
}

function openPopup(popupId) {
    // Close all popups
    const allPopups = document.querySelectorAll('.popup');
    allPopups.forEach(popup => {
        popup.style.display = 'none';
    });

    // Open the specified popup
    const popup = document.getElementById(popupId);
    popup.style.display = 'block';

    // Update button visibility as needed
    updateButtonVisibility();
}


  function closePopup(popupId) {
    const popup = document.getElementById(popupId);
    popup.style.display = 'none';
	    updateButtonVisibility();

  }


// Call checkUserLogin on page load
document.addEventListener('DOMContentLoaded', async () => {
  try {
    await checkUserLogin();
   // Introduce a delay of 1000 milliseconds (1 second)
    setTimeout(() => {
      updateButtonVisibility();
    }, 1000);
    // Fetch job posts and initially render them
    const initialJobPosts = await getJobPosts();
    jobPosts = initialJobPosts; // Assuming jobPosts is a global variable
    renderJobPosts(jobPosts);
  } catch (error) {
    console.error('Error during DOMContentLoaded:', error);
  }
});


	  

 var userId = "";
// Update button visibility based on user login status
function updateButtonVisibility() {
  const userLoggedIn = localStorage.getItem('userLoggedIn');
  const auth = firebase.auth();

  const registerButton = document.getElementById('registerBTN');
  const loginButton = document.getElementById('loginBTN');
  const logoutButton = document.getElementById('logoutBTN');

		      console.log('userLoggedIn  ',userLoggedIn);
		      console.log('auth.currentUser  ',auth.currentUser);

  if (userLoggedIn === 'true' && auth.currentUser) {
	      console.log('User is logged in.');

    // User is logged in, hide register and login buttons, show logout button
    registerButton.style.display = 'none';
    loginButton.style.display = 'none';
    logoutButton.style.display = 'block';
    quickAddBTN.style.display = 'block';
  } else {

	    if (userLoggedIn === 'true' ||  auth.currentUser) {
		      const welcomeArea = document.getElementById('welcome-area');

welcomeArea.innerHTML = "Welcome Back";
	      console.log('Ready To Login, Welcome Back');
    registerButton.style.display = 'none';
    loginButton.style.display = 'block';
    logoutButton.style.display = 'none';
    quickAddBTN.style.display = 'none';
	    
	    }else{
		    console.log('User is not logged in.');

    // User is logged out, show register and login buttons, hide logout button
    registerButton.style.display = 'block';
    loginButton.style.display = 'block';
    logoutButton.style.display = 'none';
    quickAddBTN.style.display = 'none';
		    userId = auth.currentUser.uid
	    }
  }
}


	    
        // Your JavaScript code goes here
    </script>
</body>
</html>

  
